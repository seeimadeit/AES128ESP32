<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AES128ESP32 Library: crypto Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AES128ESP32 Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classcrypto.html','','classcrypto-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">crypto Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="crypto_8h_source.html">crypto.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0ed569d3adc4d06c552296b15c857a3f" id="r_a0ed569d3adc4d06c552296b15c857a3f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ed569d3adc4d06c552296b15c857a3f">crypto</a> ()</td></tr>
<tr class="memitem:a28ac28a89e96d6b63456a8f7e814e6f2" id="r_a28ac28a89e96d6b63456a8f7e814e6f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28ac28a89e96d6b63456a8f7e814e6f2">begin</a> ()</td></tr>
<tr class="memitem:a30d7739ffe2500031d46587175785ca0" id="r_a30d7739ffe2500031d46587175785ca0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30d7739ffe2500031d46587175785ca0">setkeyaccess</a> (<a class="el" href="classpass2_key.html">pass2Key</a> *keyholder)</td></tr>
<tr class="memitem:a7d1896ba4405c0c41ece8f33edeb0929" id="r_a7d1896ba4405c0c41ece8f33edeb0929"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d1896ba4405c0c41ece8f33edeb0929">setkeyaccess</a> (<a class="el" href="classpass2_key.html">pass2Key</a> &amp;keyholder)</td></tr>
<tr class="memitem:aa8bd0e7f2f0b92f2f142529c2cd2fa32" id="r_aa8bd0e7f2f0b92f2f142529c2cd2fa32"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8bd0e7f2f0b92f2f142529c2cd2fa32">getIVbytes</a> (size_t &amp;IVsize)</td></tr>
<tr class="memitem:a35651b8674810a2fe206ca3a13d603e9" id="r_a35651b8674810a2fe206ca3a13d603e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35651b8674810a2fe206ca3a13d603e9">setIVbytes</a> (unsigned char *bytes, size_t byteslength)</td></tr>
<tr class="memitem:a4c029492dcbc7d25ced3fccfbaee41dd" id="r_a4c029492dcbc7d25ced3fccfbaee41dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c029492dcbc7d25ced3fccfbaee41dd">clearIV</a> ()</td></tr>
<tr class="memitem:aad0644c65e5d0a62314d7317778aec02" id="r_aad0644c65e5d0a62314d7317778aec02"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad0644c65e5d0a62314d7317778aec02">Decrypt</a> (unsigned char *bytes, size_t len)</td></tr>
<tr class="memitem:a491b691499ee19927e6d7b7403f84829" id="r_a491b691499ee19927e6d7b7403f84829"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a491b691499ee19927e6d7b7403f84829">Encrypt</a> (String datatoEncrypt, size_t &amp;outputsize)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>For decryption to be successfull the following need to be identical to the values used for the encryption. the key data the iv data For encryption to be successful the following need to exist. the key data optionally the iv data. If the iv data does not exist a new iv will be generated.</p>
<p>To setup the key data call the <a class="el" href="#a30d7739ffe2500031d46587175785ca0">setkeyaccess()</a></p>
<p>responsabilities create a <a class="el" href="classpass2_key.html">pass2Key</a> object create a masterkey (with makekey() ) and persist the data (with getmasterkey() ) - you don't want to loose the master key once it has been created. the masterkey cannot encrypt or decrypt data because of security added to the data. it can only generate newkey data. if you already have the masterkey available use the function setmasterkey() generate a newkey from the plain text password. derivekeyfromtext(). you cannot save the newkey data, it always needs to be generated.</p>
<p>create a crpto object set the keys to the crypto object using <a class="el" href="#a30d7739ffe2500031d46587175785ca0">setkeyaccess()</a> * if you change the <a class="el" href="classpass2_key.html">pass2Key</a> object you need to update the cryto object again now you can encrypt but not decrypt. if you have a IV already you can call the <a class="el" href="#a35651b8674810a2fe206ca3a13d603e9">setIVbytes()</a> after you set the IV you can decrypt. if you do not have a IV when you call <a class="el" href="#a491b691499ee19927e6d7b7403f84829">Encrypt()</a> it will generate a new IV, use <a class="el" href="#aa8bd0e7f2f0b92f2f142529c2cd2fa32">getIVbytes()</a> so you can save the IV data. if the <a class="el" href="classpass2_key.html">pass2Key</a> goes out of scope the cypto class will not function. it will probably fail/crash.</p>
<p>what to know masterkey: can only generate new keys. you can persist the masterkey newkey: can only encrypt or decrypt data. you cannot persist the newkey. it is considered secret IV: is not considered secret. you can persist the IV. password: is considered secret, it must never be saved. </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00056">56</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0ed569d3adc4d06c552296b15c857a3f" name="a0ed569d3adc4d06c552296b15c857a3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ed569d3adc4d06c552296b15c857a3f">&#9670;&#160;</a></span>crypto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">crypto::crypto </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00069">69</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a28ac28a89e96d6b63456a8f7e814e6f2" name="a28ac28a89e96d6b63456a8f7e814e6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ac28a89e96d6b63456a8f7e814e6f2">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool crypto::begin </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>return false if it fails to initialize the crypto engine. </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00071">71</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="a4c029492dcbc7d25ced3fccfbaee41dd" name="a4c029492dcbc7d25ced3fccfbaee41dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c029492dcbc7d25ced3fccfbaee41dd">&#9670;&#160;</a></span>clearIV()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crypto::clearIV </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>clear the IV bytes, you can either generate a new IV during the Encryption function or set a previously existing IV with setIVBytes </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00122">122</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="aad0644c65e5d0a62314d7317778aec02" name="aad0644c65e5d0a62314d7317778aec02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0644c65e5d0a62314d7317778aec02">&#9670;&#160;</a></span>Decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String crypto::Decrypt </td>
          <td>(</td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>encrypt the string and return the encrpted bytes, the outputsize if the number of bytes returned. NOTE: it is critical to free the returned bytes example crypto cry; if (!cry.<a class="el" href="#a28ac28a89e96d6b63456a8f7e814e6f2">begin()</a>) while(true) ; // oops it failed to initial the object cry.setkeyaccess(&amp;k); // k is the <a class="el" href="classpass2_key.html">pass2Key</a> object size_t numOfbytes=0; // number of bytes in the allocated memory unsigned char* encoded=cry.Encrypt("1234567890abcdefG",numOfbytes); String rtn = cry.Decrypt(encoded, numOfbytes); free(encoded); </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00182">182</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="a491b691499ee19927e6d7b7403f84829" name="a491b691499ee19927e6d7b7403f84829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a491b691499ee19927e6d7b7403f84829">&#9670;&#160;</a></span>Encrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char * crypto::Encrypt </td>
          <td>(</td>
          <td class="paramtype">String</td>          <td class="paramname"><span class="paramname"><em>datatoEncrypt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;</td>          <td class="paramname"><span class="paramname"><em>outputsize</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00218">218</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="aa8bd0e7f2f0b92f2f142529c2cd2fa32" name="aa8bd0e7f2f0b92f2f142529c2cd2fa32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8bd0e7f2f0b92f2f142529c2cd2fa32">&#9670;&#160;</a></span>getIVbytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char * crypto::getIVbytes </td>
          <td>(</td>
          <td class="paramtype">size_t &amp;</td>          <td class="paramname"><span class="paramname"><em>IVsize</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>return the IV bytes, set the IVsize to the memory buffer size. If the user has not performed an encrypt operation the IV will not have been generated and will return 0 bytes. Without an IV it will not be possible to decrypt data, so the user must supply the IV data. </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00103">103</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="a35651b8674810a2fe206ca3a13d603e9" name="a35651b8674810a2fe206ca3a13d603e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35651b8674810a2fe206ca3a13d603e9">&#9670;&#160;</a></span>setIVbytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crypto::setIVbytes </td>
          <td>(</td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>byteslength</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>set the initialisation vector, this must be done before decryption can happen. This can also happen before encryption if you want to use a known IV. Once the IV bytes are set the encryption function will not generate a new IV. If you want to clear the IV bytes so a new IV is generated, use the <a class="el" href="#a4c029492dcbc7d25ced3fccfbaee41dd">clearIV()</a> function. </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00113">113</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="a7d1896ba4405c0c41ece8f33edeb0929" name="a7d1896ba4405c0c41ece8f33edeb0929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1896ba4405c0c41ece8f33edeb0929">&#9670;&#160;</a></span>setkeyaccess() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crypto::setkeyaccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classpass2_key.html">pass2Key</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>keyholder</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>update the encryption key from the <a class="el" href="classpass2_key.html">pass2Key</a> object by reference </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00094">94</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<a id="a30d7739ffe2500031d46587175785ca0" name="a30d7739ffe2500031d46587175785ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30d7739ffe2500031d46587175785ca0">&#9670;&#160;</a></span>setkeyaccess() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crypto::setkeyaccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classpass2_key.html">pass2Key</a> *</td>          <td class="paramname"><span class="paramname"><em>keyholder</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>update the encryption key from the <a class="el" href="classpass2_key.html">pass2Key</a> object by pointer to object </p>

<p class="definition">Definition at line <a class="el" href="crypto_8h_source.html#l00087">87</a> of file <a class="el" href="crypto_8h_source.html">crypto.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="crypto_8h_source.html">crypto.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="classcrypto.html">crypto</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
